<!doctype html public "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
 <meta name="Generator" content="PPWIZARD version 02.213 on WIN2K, FREE tool for Windows, OS/2, DOS and UNIX by Dennis Bareis (http://www.labyrinth.net.au/~dbareis/ppwizard.htm)">
 <title>Layer AviSynth Filter</title>
 <style type=text/css>
  A:link { COLOR: #404a58;TEXT-DECORATION: none }
  A:visited { COLOR: #404a58;TEXT-DECORATION: none }
  A:active { COLOR: #404a58;TEXT-DECORATION: none }
  A:hover { COLOR: #e8f0ff; TEXT-DECORATION: underline }
  .titresmall { color : 000000; font-family: Tahoma, Verdana, Arial, Helvetica, sans-serif; font-size: 16pt; letter-spacing: 0.15em; font-weight: bold; }
 </style>
</head>
<body bgcolor=b6cac0>
<span class="titresmall"><a name="Layer"></a>Layer</span> <span class="titresmall"><tt><font color="#e8f0ff">[yuy2][rgb32]</font></tt></span><br><br>

<tt>Layer(</tt><i>base_clip, overlay_clip, string &quot;op&quot;, int &quot;level&quot;, int &quot;x&quot;, int &quot;y&quot;, int &quot;threshold&quot;, bool &quot;use_chroma&quot;</i><tt>)</tt><br><br>

<i>[funktioniert noch nicht in AviSynth 2.5]</i><br><br>

Dieser Filter kann zwei Clips mit unterschiedlicher Gr&ouml;sse (m&uuml;ssen aber im gleichem Farbraum sein) mischen, wobei verschiedene Methoden verwendet werden k&ouml;nnen. F&uuml;r eine Pixel-basierte Transparenz-Maske wird der vierte Farbkanal beim Farbraum RGB32 (der A- oder alpha-Kanal) verwendet.<br><br>

<i>base_clip</i>: Der drunterliegende Clip, der die Gr&ouml;sse und die anderen Video- und Audio-Eigenschaften des entstehenden Clips bestimmt.<br>
<i>overlay_clip</i>: Der Clip, der zu <i>base_clip</i> dazugemischt wird.<br>
<i>op</i>: Die Mischoperation, die durchgef&uuml;hrt wird. Das kann sein: &quot;add&quot; (Addieren), &quot;subtract&quot; (Subtrahieren), &quot;brighten&quot; (Aufhellen), &quot;darken&quot; (Verdunkeln), &quot;fast&quot; (die Schnellvariante), &quot;mul&quot; (Multiplizieren)<br>
<i>level</i>: 0-255, gibt die St&auml;rke der durchgef&uuml;hrten Operation an. 0: der <i>base_clip</i> wird nicht ver&auml;ndert, 255: die maximale St&auml;rke wird verwendet.<br>
<i>x, y</i>: Die Verschiebung des <i>overlay_clip</i> gegen&uuml;ber dem <i>base_clip</i>.<br>
<i>threshold</i>: Gibt es nur f&uuml;r &quot;lighten&quot; and &quot;darken&quot; (ein Schwellenwert).<br>
<i>use_chroma</i>: Gibt an, ob auch die Farbinformation von <i>overlay_clip</i> verwendet wird, der Standardwert ist <i>use_chroma=true</i> (Farbe wird verwendet). Bei <i>use_chroma=false</i> wird nur die Helligkeitsinformation verwendet.<br><br>

Es gibt einige Unterschiede im Verhalten und der erlaubten Parametern, die vom Farbraum und der verwendeten Mischoperation abh&auml;ngen:<br>
<ul>
 <li>Bei YUY2 gibt es keinen Alpha-Kanal, daher auch keine Transparenz-Maske. Das Verhalten ist also so, als ob die Maske &uuml;berall undurchsichtig w&auml;re.</li>
 <li>Bei RGB32 wird der Alpha-Kanal vom <i>overlay_clip</i> mit <i>level</i> multipliziert, der effektive Wert f&uuml;r Alpha f&uuml;r ein Pixel ist also alpha = (alpha_mask * level) / 256. Daher muss f&uuml;r eine Operation mit voller St&auml;rke Alpha und <i>level</i> gleich 255 sein.</li>
</ul>

Diese Operationen verhalten sich f&uuml;r RGB32 und YUY2 gleich:<br>
<table border width="75%">
 <tr> 
  <td> 
   <tt>
    <pre>&quot;fast&quot;: <i>use_chroma</i> muss TRUE sein, <i>level</i> und <i>threshold</i> werden nicht verwendet.
        Das Ergebnis ist einfach der Mittelwert zwischen <i>base_clip</i> und <i>overlay_clip</i>.

&quot;add&quot;:  <i>threshold</i> wird nicht verwendet. Der Unterschied zwischen <i>base_clip</i> und <i>overlay_clip</i> wird<br>        mit alpha multipliziert und zum <i>base_clip</i> dazugez&auml;hlt.
        alpha=0 -&gt; nur das <i>base_clip</i> ist sichtbar,
        alpha=128 -&gt; <i>base_clip</i> und <i>overlay_clip</i> werden gleichwertig gemischt,
        alpha=255 -&gt; nur das <i>overlay_clip</i> ist sichtbar.

&quot;subtract&quot;: das gleich wie bei &quot;add&quot;, allerdings wird das <i>overlay_clip</i> vorher invertiert.</pre>
   </tt>
  </td>
 </tr>
</table><br>
 

Diese Operationen arbeiten (anscheinend) nur in YUY2 korrekt:<br>
<table border width="75%">
 <tr> 
  <td> 
   <tt>
    <pre>&quot;mul&quot;: <i>threshold</i> wird nicht verwendet. Das <i>base_clip</i> wird so wie das <i>overlay_clip</i> &quot;eingef&auml;rbt&quot;, <i>use_chroma</i> sollte also TRUE sein.
       alpha=0 -&gt; nur das <i>base_clip</i> sichtbar, alpha=255 -&gt; ungef&auml;hr die gleiche Helligkeit wie das <i>base_clip</i><br>       aber mit den Farben vom <i>overlay_clip</i>

&quot;lighten&quot;: <i>use_chroma</i> muss TRUE sein. F&uuml;hrt die gleiche Operation wie &quot;add&quot; durch, aber nur wenn
           das Ergebnus HELLER als das <i>base_clip</i> ist, wird der neue Wert auch verwendet.
           Mit einem hohen <i>threshold</i> ist die Operation wahrscheinlicher,<br>           mit <i>threshold</i>=255 ist das Ergbnis das gleiche wie &quot;add&quot;,
           mit <i>threshold</i>=0 wird das <i>base_clip</i> eher unver&auml;ndert gelassen,
           abh&auml;ngig von der Differenz zwischen <i>base_clip </i>und <i>overlay_clip</i>.

&quot;darken&quot;:  das gleich wie &quot;lighten&quot;, allerdings wird das Ergebnis nur verwendet, wenn der neue Wert DUNKLER als <i>base_clip</i> ist.</pre>
   </tt>
  </td>
 </tr>
</table><br>
Siehe auch <a href="../syntax.html#multiclip" target="_self">hier</a> zu den entstehenden Clip-Eigenschaften.<br><br>

<hr><br>

<span class="titresmall"><a name="Mask"></a>Mask <tt><font color="#e8f0ff">[rgb32]</font></tt></span><br><br>

<tt>Mask(</tt><i>clip, mask_clip</i><tt>)</tt><br><br>

Setzt in <i>clip</i> eine definierte Alpha-Maske (zur Verwendung mit <tt>Layer</tt>, das <i>mask_clip</i> wird auf Grauwerte umgewandelt und diese werden als Maske (Alpha-Kanal) vom RGB32 verwendet. Bei diesem Kanal bedeutet &quot;schwarz&quot; v&ouml;llig durchsichtig, weiss bedeutet v&ouml;llig undurchsichtig.<br><br>

<hr><br>

<p><span class="titresmall"><a name="ResetMask"></a>ResetMask <tt><font color="#e8f0ff">[rgb32]</font></tt></span><br><br>

<tt>ResetMask(</tt><i>clip</i><tt>)</tt><br><br>

Setzt die Alpha-Maske vom <i>clip</i> komplett auf undurchsichtig (zur Verwendung mit <tt>Layer</tt>).<br><br>

<table border>
 <tr> 
  <td> 
   <tt>
    Der Alpha-Kanal eines RGB32-Clip ist nicht immer in einem definierten Zustand (abh&auml;ngig von der Quelle). Dieser Filter ist die einfachste Art, eine komplett &quot;weisse&quot; Maske zu setzen:<br><br>
    clip=ResetMask(clip)
   </tt>
  </td>
 </tr>
</table><br>

<hr><br>

<span class="titresmall"><a name="ColorKeyMask"></a>ColorKeyMask <tt><font color="#e8f0ff">[rgb32]</font></tt></span><br><br>

<tt>ColorKeyMask(</tt><i>clip, int color, int tolerance</i><tt>)</tt><br><br>

<p>Setzt den Alpha-Kanal (&auml;hnlich wie auch <i>Mask</i>), allerdings durch Vergleichen der Farben. Jedes Pixel mit einem Farbunterschied, der kleiner als <i>tolerance</i> ist, wird auf transparent gesetzt, andernfalls unver&auml;ndert gelassen (es wird NICHT auf undurchsichtigt gesetzt).<br><br>

<form><input type="Button" value="Back" onClick="history.go(-1)"></form>
</body>
</html>
